define("fb/menu",["fb/jquery","fb/window-events","fb/img-responsive/img-srcset"],function(e,t,n){var r=e(".fb-header"),i=r.find(".fb-menu"),s=i.find(".fb-menu-item"),o=i.find(".fb-menu-noitem"),u=r.find(".js-fb-icon-mobile"),a,f=e(window).width(),l=4,c=[],h=[],p,d,v="normal";o.show();var m=o.innerWidth();o.hide();var g=function(){var t=i.width(),n=0,r,s,a;h=[],o.hide();if(t<480){a=!1;for(var f=0,p=c.length;f<p;f++)r=e(c[f].html),r.parent().show(),s=e("<div>").append(r.clone()).html(),h.push(s),r.parent().hide();u.show()}else{u.hide(),l>t&&(t=t-m-12),a=!1;for(var d=0,v=c.length;d<v;d++)r=e(c[d].html),n+c[d].width<t&&!a?(r.parent().show(),n+=c[d].width):(a=!0,s=e("<div>").append(r.clone().removeClass("fb-menu-link").addClass("fb-submenu-link")).html(),h.push(s),r.parent().hide())}if(h.length!==0){o.show();var g='<ul class="fb-linklist">';for(var y=0,b=h.length;y<b;y++)g+="<li>"+h[y]+"</li>";g+="</ul>",e("#fb-menu-responsive").empty().append(g)}},y=function(){window.alert("MOBILE MENU")},b=function(t){var n=e(t.currentTarget);switch(t.type){case"mouseenter":n.addClass("js-fb-menu-mobile");break;case"mouseleave":n.removeClass("js-fb-menu-mobile");break;case"touchstart":t.preventDefault();var r=e(t.target);r.hasClass("fb-menu-item")||r.hasClass("fb-menu-link")?n.hasClass("js-fb-menu-mobile")?n.removeClass("js-fb-menu-mobile"):(n.addClass("js-fb-menu-mobile"),s.not(n).removeClass("js-fb-menu-mobile")):r.hasClass("fb-submenu-link")&&(window.location=r.attr("href"));break;default:}},w=function(e,t){if(!t)return;t&&t.scrollTop>p&&f>480?d="sticky":d="normal";if(d===v)return;v=d,d==="sticky"?r.addClass("fb-nav-sticky"):r.removeClass("fb-nav-sticky")},E=function(e,t){f=t.width,g()},S=function(){var t=e(this),n=t.outerWidth(),r=t.find(".fb-menu-link")[0];l+=n,c.push({width:n,html:r}),t=null},x=function(){var t=e("body"),r=t.attr("data-srcset");if(r){var i=n.get({srcset:r}).best.src;i!==a&&(a=i,t.css("background-image",'url("'+i+'")'))}t.css("background-color","#fff")},T=function(){x(),t.onResize(x);if(i.length===0)return;i.css("overflow","inherit"),p=i.offset().top,s.not(".fb-menu-noitem").each(S),s.on("touchstart",b),s.on("mouseenter mouseleave",b),t.onScroll(w),t.onResize(E),u.on("click",y),g()};return{init:T}});